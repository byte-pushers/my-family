<!-- Event Registration Form Component -->
<div class="p-4">
  <!-- Step Indicator -->
  <div class="text-center mb-6">
    <div class="text-sm text-gray-600 mb-2">Step {{currentStep + 1}} of {{steps.length}}</div>
    <div class="flex justify-center gap-2">
      <span *ngFor="let step of steps; let i = index"
            [class]="'w-2 h-2 rounded-full ' + (i === currentStep ? 'bg-blue-500' : 'bg-gray-200')">
      </span>
    </div>
  </div>

  <form [formGroup]="registrationForm">
    <!-- Step 1: Personal Information -->
    <div *ngIf="currentStep === 0" class="space-y-4">
      <!-- First Name and Middle Name Row -->
      <div class="flex gap-4">
        <ion-item class="flex-1 bg-transparent rounded-lg border border-gray-200">
          <ion-label position="stacked" class="text-gray-600">First Name</ion-label>
          <ion-input formControlName="firstName"
                     placeholder="Enter Name..."
                     class="p-3 bg-white rounded-lg">
          </ion-input>
        </ion-item>

        <ion-item class="flex-1 bg-transparent rounded-lg border border-gray-200">
          <ion-label position="stacked" class="text-gray-600">Middle Name</ion-label>
          <ion-input formControlName="middleName"
                     placeholder="Enter Name..."
                     class="p-3 bg-white rounded-lg">
          </ion-input>
        </ion-item>
      </div>

      <!-- Last Name and Nick Name Row -->
      <div class="flex gap-4">
        <ion-item class="flex-1 bg-transparent rounded-lg border border-gray-200">
          <ion-label position="stacked" class="text-gray-600">Last Name</ion-label>
          <ion-input formControlName="lastName"
                     placeholder="Enter Name..."
                     class="p-3 bg-white rounded-lg">
          </ion-input>
        </ion-item>

        <ion-item class="flex-1 bg-transparent rounded-lg border border-gray-200">
          <ion-label position="stacked" class="text-gray-600">Nick Name</ion-label>
          <ion-input formControlName="nickName"
                     placeholder="Enter nick name..."
                     class="p-3 bg-white rounded-lg">
          </ion-input>
        </ion-item>
      </div>

      <!-- Birthday and Age Row -->
      <div class="flex gap-4">
        <ion-item class="flex-1 bg-transparent rounded-lg border border-gray-200">
          <ion-label position="stacked" class="text-gray-600">Birthday</ion-label>
          <ion-input formControlName="birthday"
                     type="date"
                     class="p-3 bg-white rounded-lg">
          </ion-input>
        </ion-item>

        <ion-item class="flex-1 bg-transparent rounded-lg border border-gray-200">
          <ion-label position="stacked" class="text-gray-600">Age</ion-label>
          <ion-select formControlName="age"
                      placeholder="Select Age"
                      class="p-3 bg-white rounded-lg">
            <ion-select-option *ngFor="let age of ageRange" [value]="age">{{age}}</ion-select-option>
          </ion-select>
        </ion-item>
      </div>

      <!-- Full Width Fields -->
      <ion-item class="w-full bg-transparent rounded-lg border border-gray-200">
        <ion-label position="stacked" class="text-gray-600">Email Address</ion-label>
        <ion-input formControlName="email"
                   type="email"
                   placeholder="Email Address..."
                   class="p-3 bg-white rounded-lg">
        </ion-input>
      </ion-item>

      <ion-item class="w-full bg-transparent rounded-lg border border-gray-200">
        <ion-label position="stacked" class="text-gray-600">Address</ion-label>
        <ion-input formControlName="address"
                   placeholder="Enter Address..."
                   class="p-3 bg-white rounded-lg">
        </ion-input>
      </ion-item>

      <ion-item class="w-full bg-transparent rounded-lg border border-gray-200">
        <ion-label position="stacked" class="text-gray-600">Lineage</ion-label>
        <ion-select formControlName="lineage"
                    placeholder="Select Lineage..."
                    class="p-3 bg-white rounded-lg">
          <ion-select-option value="maternal">Maternal</ion-select-option>
          <ion-select-option value="paternal">Paternal</ion-select-option>
        </ion-select>
      </ion-item>
    </div>

    <!-- Step 2: Agenda -->
    <div *ngIf="currentStep === 1" class="p-4">
      <h2 class="text-2xl font-bold mb-6">Agenda</h2>

      <div class="space-y-6">
        <!-- First Agenda Item -->
        <div class="space-y-3">
          <div class="flex items-center gap-2">
            <img src="assets/icon/clock.png" alt="Time"
                 class="w-5 h-5 brightness-0 opacity-60">
            <span class="text-gray-600">7:00pm - 8:00pm</span>
          </div>

          <div class="space-y-2">
            <h3 class="text-base font-semibold">Event Details</h3>
            <div class="flex gap-2">
              <ion-icon name="checkmark-outline"
                        class="text-green-500 text-xl mt-0.5">
              </ion-icon>
              <p class="text-sm text-gray-600 leading-relaxed">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit...
              </p>
            </div>
          </div>
        </div>

        <div class="h-px bg-gray-200 my-6"></div>

        <!-- Second Agenda Item -->
        <div class="space-y-3">
          <div class="flex items-center gap-2">
            <img src="assets/icon/clock.png" alt="Time"
                 class="w-5 h-5 brightness-0 opacity-60">
            <span class="text-gray-600">8:00pm - 9:00pm</span>
          </div>

          <div class="space-y-2">
            <h3 class="text-base font-semibold">Event Details</h3>
            <div class="flex gap-2">
              <ion-icon name="checkmark-outline"
                        class="text-green-500 text-xl mt-0.5">
              </ion-icon>
              <p class="text-sm text-gray-600 leading-relaxed">
                Lorem ipsum dolor sit amet, consectetur adipiscing elit...
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Step 3: Merchandise -->
    <div *ngIf="currentStep === 2" class="p-4">
      <div class="flex gap-8">
        <div class="flex-none w-48">
          <img src="assets/img/shirt.jpg"
               alt="Event T-Shirt"
               class="w-full h-auto object-contain">
        </div>

        <div class="flex-1 space-y-6">
          <div class="space-y-2">
            <h3 class="text-base font-medium">T-Shirt Size</h3>
            <ion-select interface="popover"
                        placeholder="Select Size..."
                        formControlName="tshirtSize"
                        class="w-full p-3 bg-gray-100 rounded-lg">
              <ion-select-option *ngFor="let size of ['XS', 'S', 'M', 'L', 'XL', '2XL']"
                                 [value]="size">{{size}}</ion-select-option>
            </ion-select>
          </div>

          <div class="space-y-2">
            <h3 class="text-base font-medium">Quantity</h3>
            <ion-select interface="popover"
                        placeholder="Quantity..."
                        formControlName="tshirtQuantity"
                        class="w-full p-3 bg-gray-100 rounded-lg">
              <ion-select-option *ngFor="let num of [1,2,3,4,5]"
                                 [value]="num">{{num}}</ion-select-option>
            </ion-select>
          </div>

          <div class="space-y-2">
            <h3 class="text-base font-medium">Price</h3>
            <p class="text-lg font-bold text-gray-900">
              ${{merchandiseItems[0].price.toFixed(2)}}
            </p>
          </div>
        </div>
      </div>
    </div>

    <!-- Step 4: Payment Information -->
    <div *ngIf="currentStep === 3" class="p-4 space-y-6">
      <h2 class="text-2xl font-semibold">Payment Information</h2>

      <div class="mb-6">
        <h3 class="text-lg">
          Total: <span class="font-semibold">${{calculateTotal().toFixed(2)}}</span>
        </h3>
      </div>

      <div class="flex gap-4 mb-6">
        <div [class]="'flex-1 p-3 border rounded-lg flex items-center gap-2 cursor-pointer ' +
                     (paymentMethod === 'card' ? 'border-blue-500 bg-blue-50' : 'border-gray-200')"
             (click)="selectPaymentMethod('card')">
          <img src="assets/img/credit-card.svg" alt="Credit/Debit card icon" class="w-6 h-6">
          <span>Credit/Debit</span>
        </div>

        <div [class]="'flex-1 p-3 border rounded-lg flex items-center gap-2 cursor-pointer ' +
                     (paymentMethod === 'paypal' ? 'border-blue-500 bg-blue-50' : 'border-gray-200')"
             (click)="selectPaymentMethod('paypal')">
          <img src="assets/img/paypal.svg" alt="PayPal icon" class="w-6 h-6">
          <span>PayPal</span>
        </div>
      </div>

      <div *ngIf="paymentMethod === 'card'" class="space-y-4">
        <div class="flex gap-4">
          <ion-input placeholder="Card Number"
                     class="flex-[2] p-4 bg-gray-100 rounded-lg border border-gray-200"
                     formControlName="cardNumber">
          </ion-input>
          <ion-input placeholder="MM/YY"
                     class="flex-1 p-4 bg-gray-100 rounded-lg border border-gray-200"
                     formControlName="cardExpiry">
          </ion-input>
        </div>

        <div class="flex gap-4">
          <ion-input placeholder="First Name"
                     class="flex-1 p-4 bg-gray-100 rounded-lg border border-gray-200"
                     formControlName="firstName">
          </ion-input>
          <ion-input placeholder="Last Name"
                     class="flex-1 p-4 bg-gray-100 rounded-lg border border-gray-200"
                     formControlName="lastName">
          </ion-input>
        </div>

        <div class="flex gap-4">
          <ion-input placeholder="Zipcode"
                     class="flex-1 p-4 bg-gray-100 rounded-lg border border-gray-200"
                     formControlName="zipcode">
          </ion-input>
          <ion-input placeholder="Country"
                     class="flex-1 p-4 bg-gray-100 rounded-lg border border-gray-200"
                     formControlName="country">
          </ion-input>
        </div>
      </div>
    </div>

    <!-- Navigation Buttons -->
    <div class="flex justify-between mt-6 p-4">
      <ion-button *ngIf="currentStep > 0"
                  fill="outline"
                  (click)="previousStep()">
        Previous
      </ion-button>

      <div class="flex justify-end flex-1">
        <ion-button *ngIf="currentStep < steps.length - 1"
                    (click)="nextStep()">
          Next
        </ion-button>
        <ion-button *ngIf="currentStep === steps.length - 1"
                    color="success"
                    (click)="onSubmit()">
          Submit Registration
        </ion-button>
      </div>
    </div>
  </form>
</div>
