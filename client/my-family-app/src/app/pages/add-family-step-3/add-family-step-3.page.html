<ion-content [fullscreen]="true" class="ion-padding">
  <div class="flex flex-col min-h-screen p-2">
    <div class="text-black text-xl mt-2 p-2 font-inter font-bold">Add To Family Tree</div>
    <div class="text-center text-xs mt-6 font-bold text-blue-800">Step 3 of 4</div>
    <div class="flex justify-center mt-1 mb-5">
      <span class="w-2 h-2 bg-blue-800 rounded-full mx-1"></span>
      <span class="w-2 h-2 bg-blue-800 rounded-full mx-1"></span>
      <span class="w-2 h-2 bg-blue-300 rounded-full mx-1"></span>
    </div>

    <app-family-member-form
      [relationshipType]="'Uncles'"
      [familyMemberForm]="parentsForm">
    </app-family-member-form>

    <app-family-member-form
      [relationshipType]="'Aunts'"
      [familyMemberForm]="grandparentsForm">
    </app-family-member-form>

    <app-family-member-form
      [relationshipType]="'Cousins'"
      [familyMemberForm]="siblingsForm">
    </app-family-member-form>

    <!-- Crest Upload Option -->
    <div class="flex justify-center items-center space-x-4 mt-3">
      <!-- Upload box -->
      <div class="w-full h-48 bg-gray-100 border-2 border-dashed flex flex-col justify-end" (click)="fileInput.click()">
        <div class="font-inter font-bold text-xl text-center text-black mb-3">Upload Crest (optional)</div>
        <div class="font-inter text-sm text-center text-gray-400 mb-3">Click here to upload image</div>
        <input type="file" #fileInput (change)="onFileChange($event)" accept="image/" class="hidden"/>
      </div>

      <input id="crest-upload" type="file" class="hidden"/>

      <!-- Preview box -->
      <div class="crest-photo grid col-span-full place-items-center w-full h-48 bg-gray-100">
        <img *ngIf="selectedImage" [src]="selectedImage" alt="Uploaded Image" class="h-full w-full object-cover"/>
      </div>
    </div>

    <!-- Buttons -->
    <div class="mt-3 flex items-center justify-center gap-x-6">
      <button type="button" class="text-gray-800 bg-gray-100 px-4 py-2 rounded-md hover:bg-gray-200" [routerLink]="['/add-family-step-2']">
        Back
      </button>
      <!-- TODO: route to family tree and create FamilyMember objects for all family members submitted -->
      <button type="submit"  class="bg-[#0D4C92] text-white px-6 py-2 rounded-md hover:bg-blue-800 shadow">
        Add to family
      </button>
      <button type="button" class="text-gray-800 bg-red-100 px-4 py-2 rounded-md hover:bg-red-200" (click)="clearPage()">
        Clear
      </button>
    </div>
  </div>
</ion-content>

<ion-footer><app-footer-navigation></app-footer-navigation></ion-footer>
